(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,n);if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key,"string"),"symbol"===e(i)?i:String(i)),o)}var i}var n=function(){function e(t,n){var r=t.data,o=t.userId,i=t.handleCardClick,c=t.handleLikeClick,a=t.handleDeleteIconClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardName=r.name,this._cardLink=r.link,this._cardLikes=r.likes,this._id=r._id,this._userId=o,this._ownerId=r.owner._id,this._handleCardClick=i,this._handleLikeClick=c,this._handleDeleteIconClick=a,this._template=n}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".element").cloneNode(!0)}},{key:"isLiked",value:function(){var e=this;return this._cardLikes.find((function(t){return t._id===e._userId}))}},{key:"setLikes",value:function(e){this._cardLikes=e,this._card.querySelector(".element__like-count").textContent=this._cardLikes.length,this.isLiked()?this._likeToggleOnHandler():this._likeToggleOffHandler()}},{key:"_setEventListeners",value:function(){var e=this;this._cardImage.addEventListener("click",(function(){e._handleCardClick()})),this._card.querySelector(".element__remove").addEventListener("click",(function(){e._handleDeleteIconClick(e._id)})),this._card.querySelector(".element__like").addEventListener("click",(function(){e._handleLikeClick(e._id)}))}},{key:"_likeToggleOnHandler",value:function(){this._cardLikeButton=this._card.querySelector(".element__like"),this._cardLikeButton.classList.add("element__like_active")}},{key:"_likeToggleOffHandler",value:function(){this._cardLikeButton=this._card.querySelector(".element__like"),this._cardLikeButton.classList.remove("element__like_active")}},{key:"generateCard",value:function(){return this._card=this._getTemplate(),this._cardImage=this._card.querySelector(".element__image"),this._setEventListeners(),this.setLikes(this._cardLikes),this._cardImage.setAttribute("src",this._cardLink),this._cardImage.setAttribute("alt",this._cardName),this._card.querySelector(".element__name").textContent=this._cardName,this._ownerId!==this._userId&&(this._card.querySelector(".element__remove").style.display="none"),this._card}},{key:"deleteMyCard",value:function(){this._card.remove()}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t);if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key,"string"),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._conf=t,this._formSelector=n,this._currentForm=document.querySelector(this._formSelector),this._buttonElement=this._currentForm.querySelector(this._conf.submitButtonSelector),this._inputList=Array.from(this._currentForm.querySelectorAll(this._conf.inputSelector))}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_setEventListeners",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._isValid(t),e._toggleButtonState()}))}))}},{key:"_isValid",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}},{key:"_showInputError",value:function(e,t){var n=this._currentForm.querySelector("#".concat(e.id,"-error"));e.classList.add(this._conf.inputErrorClass),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._currentForm.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._conf.inputErrorClass),t.textContent=""}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._conf.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._conf.inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),c={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".submit",inactiveButtonClass:"popup__button-invalid",inputErrorClass:"popup__type-error"};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key,"string"),"symbol"===a(o)?o:String(o)),r)}var o}var l=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderFinal",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key,"string"),"symbol"===s(o)?o:String(o)),r)}var o}var p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._closeButton=this._popup.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this),this._handleOverlayClick=this._handleOverlayClick.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.classList.remove("popup_opened")}},{key:"setEventListeners",value:function(){var e=this;this._closeButton.addEventListener("click",(function(){e.close()})),this._popup.addEventListener("click",this._handleOverlayClick)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleOverlayClick",value:function(e){e.target===this._popup&&this.close()}}])&&f(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key,"string"),"symbol"===y(o)?o:String(o)),r)}var o}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function b(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,e))._handleFormSubmission=t,n._form=n._popup.querySelector(".form"),n._inputList=n._form.querySelectorAll(".form__input"),n._submitButton=n._form.querySelector(".submit"),n}return t=c,(n=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.id]=t.value})),e}},{key:"setEventListeners",value:function(){var e=this;h(_(c.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmission(e._getInputValues())}))}},{key:"close",value:function(){this._form.reset(),h(_(c.prototype),"close",this).call(this)}},{key:"renderLoadingText",value:function(e){this._submitButton.textContent=e?"Сохранение..":"Сохранить"}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(p);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key,"string"),"symbol"===S(o)?o:String(o)),r)}var o}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=j(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},w.apply(this,arguments)}function j(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function O(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e))._cardImageView=document.querySelector(".view-mesto-popup__image"),t._cardNameView=document.querySelector(".view-mesto-popup__name"),t}return t=c,(n=[{key:"open",value:function(e,t){w(P(c.prototype),"open",this).call(this),this._cardImageView.src=t,this._cardImageView.alt=e,this._cardNameView.textContent=e}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(p);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key,"string"),"symbol"===C(o)?o:String(o)),r)}var o}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=q(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function q(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function x(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}var U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(c,e);var t,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=B(r);if(o){var n=B(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e))._form=t._popup.querySelector(".form"),t}return t=c,(n=[{key:"setEventListeners",value:function(){var e=this;T(B(c.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleConfirmation()}))}},{key:"setHandleConfirmation",value:function(e){this._handleConfirmation=e}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(p);function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==V(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key,"string"),"symbol"===V(o)?o:String(o)),r)}var o}var N=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._userData={name:this._name.textContent,about:this._about.textContent},this._userData}},{key:"setUserInfo",value:function(e){this._name.textContent=e.name,this._about.textContent=e.about,this._avatar.style.backgroundImage="url(".concat(e.avatar,")")}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key,"string"),"symbol"===A(o)?o:String(o)),r)}var o}var H=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getInitialInfo",value:function(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"editUserInfo",value:function(e,t){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"addNewCard",value:function(e,t){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"removeMyCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"unlikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"editAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),M=document.querySelector(".profile__edit-info"),J=document.querySelector(".profile-popup__input_type_name"),z=document.querySelector(".profile-popup__input_type_job"),G=document.querySelector(".profile__add-element"),K=document.querySelector(".add-mesto-popup__content"),Q=document.querySelector(".add-mesto-popup__input_type_mesto"),W=document.querySelector(".add-mesto-popup__input_type_image"),X=document.querySelector(".update-avatar-popup__content"),Y=document.querySelector(".profile__avatar-overlay"),Z=new H({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-55",headers:{authorization:"8f0b498f-1e88-4aae-945a-26a5ecabde6e","Content-Type":"application/json"}}),$=new l({renderer:function(e){$.addItem(ee(e))}},".elements"),ee=function(e){var t=new n({data:e,userId:te,handleCardClick:function(){var t,n;t=e.name,n=e.link,se.open(t,n)},handleLikeClick:function(e){t.isLiked()?Z.unlikeCard(e).then((function(e){t.setLikes(e.likes)})).catch((function(e){console.log(e)})):Z.likeCard(e).then((function(e){t.setLikes(e.likes)})).catch((function(e){console.log(e)}))},handleDeleteIconClick:function(e){ue.open(),ue.setHandleConfirmation((function(){Z.removeMyCard(e).then((function(e){t.deleteMyCard(),ue.close()})).catch((function(e){console.log(e)}))}))}},".template");return t.generateCard()},te="";Z.getInitialInfo().then((function(e){var t=e[0];t.reverse();var n=e[1];te=n._id,$.renderFinal(t),ie.setUserInfo(n)}));var ne=new i(c,".profile-popup__content"),re=new i(c,".add-mesto-popup__content"),oe=new i(c,".update-avatar-popup__content"),ie=new N({nameSelector:".profile__name",aboutSelector:".profile__job",avatarSelector:".profile__edit-avatar-button"}),ce=new g(".profile-popup",(function(e){ce.renderLoadingText(!0),Z.editUserInfo(e.name,e.about).then((function(e){ie.setUserInfo(e),ce.renderLoadingText(!1),ce.close()})).catch((function(e){console.log(e)}))})),ae=new g(".add-mesto-popup",(function(){ae.renderLoadingText(!0),fe(),ae.renderLoadingText(!1)})),ue=new U(".deletion-confirm-popup"),le=new g(".update-avatar-popup",(function(e){le.renderLoadingText(!0),Z.editAvatar(e.avatar).then((function(e){ie.setUserInfo(e)})).catch((function(e){console.log(e)})).finally((function(){return le.renderLoadingText(!1)})),le.close()})),se=new L(".view-mesto-popup");se.setEventListeners(),ce.setEventListeners(),ae.setEventListeners(),ue.setEventListeners(),le.setEventListeners();var fe=function(){Z.addNewCard(Q.value,W.value).then((function(e){$.addItem(ee(e)),ae.close()})).catch((function(e){console.log(e)}))};M.addEventListener("click",(function(){var e;ne.resetValidation(),ce.open(),e=ie.getUserInfo(),J.value=e.name,z.value=e.about})),G.addEventListener("click",(function(){re.resetValidation(),K.reset(),ae.open()})),Y.addEventListener("click",(function(){oe.resetValidation(),X.reset(),le.open()})),ne.enableValidation(),re.enableValidation(),oe.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiNHJCQUFNQSxFQUFJLFdBQ1IsYUFBdUZDLEdBQVUsSUFBbkZDLEVBQUksRUFBSkEsS0FBTUMsRUFBTSxFQUFOQSxPQUFRQyxFQUFlLEVBQWZBLGdCQUFpQkMsRUFBZSxFQUFmQSxnQkFBaUJDLEVBQXFCLEVBQXJCQSx1Qiw0RkFBcUIsU0FDakZDLEtBQUtDLFVBQVlOLEVBQUtPLEtBQ3RCRixLQUFLRyxVQUFZUixFQUFLUyxLQUN0QkosS0FBS0ssV0FBYVYsRUFBS1csTUFDdkJOLEtBQUtPLElBQU1aLEVBQUtZLElBQ2hCUCxLQUFLUSxRQUFVWixFQUNmSSxLQUFLUyxTQUFXZCxFQUFLZSxNQUFNSCxJQUMzQlAsS0FBS1csaUJBQW1CZCxFQUN4QkcsS0FBS1ksaUJBQW1CZCxFQUN4QkUsS0FBS2EsdUJBQXlCZCxFQUM5QkMsS0FBS2MsVUFBWXBCLENBQ25CLEMsUUFnRUMsTyxFQWhFQSxHLEVBQUEsMkJBRUQsV0FFRSxPQURvQnFCLFNBQVNDLGNBQWNoQixLQUFLYyxXQUFXRyxRQUFRRCxjQUFjLFlBQVlFLFdBQVUsRUFFekcsR0FBQyxxQkFFRCxXQUFVLFdBRVIsT0FENkJsQixLQUFLSyxXQUFXYyxNQUFLLFNBQUFDLEdBQUksT0FBSUEsRUFBS2IsTUFBUSxFQUFLQyxPQUFPLEdBRXJGLEdBQUMsc0JBRUQsU0FBU2EsR0FDUHJCLEtBQUtLLFdBQWFnQixFQUNFckIsS0FBS3NCLE1BQU1OLGNBQWMsd0JBQ2pDTyxZQUFjdkIsS0FBS0ssV0FBV21CLE9BRXRDeEIsS0FBS3lCLFVBQ1B6QixLQUFLMEIsdUJBR0wxQixLQUFLMkIsdUJBRVQsR0FBQyxnQ0FFRCxXQUFxQixXQUNuQjNCLEtBQUs0QixXQUFXQyxpQkFBaUIsU0FBUyxXQUN4QyxFQUFLbEIsa0JBQ1AsSUFDQVgsS0FBS3NCLE1BQU1OLGNBQWMsb0JBQW9CYSxpQkFBaUIsU0FBUyxXQUNyRSxFQUFLaEIsdUJBQXVCLEVBQUtOLElBQ25DLElBQ0FQLEtBQUtzQixNQUFNTixjQUFjLGtCQUFrQmEsaUJBQWlCLFNBQVMsV0FDbkUsRUFBS2pCLGlCQUFpQixFQUFLTCxJQUM3QixHQUNGLEdBQUMsa0NBRUQsV0FDRVAsS0FBSzhCLGdCQUFrQjlCLEtBQUtzQixNQUFNTixjQUFjLGtCQUNoRGhCLEtBQUs4QixnQkFBZ0JDLFVBQVVDLElBQUksdUJBQ3JDLEdBQUMsbUNBRUQsV0FDRWhDLEtBQUs4QixnQkFBa0I5QixLQUFLc0IsTUFBTU4sY0FBYyxrQkFDaERoQixLQUFLOEIsZ0JBQWdCQyxVQUFVRSxPQUFPLHVCQUN4QyxHQUFDLDBCQUVELFdBWUUsT0FYQWpDLEtBQUtzQixNQUFRdEIsS0FBS2tDLGVBQ2xCbEMsS0FBSzRCLFdBQWE1QixLQUFLc0IsTUFBTU4sY0FBYyxtQkFDM0NoQixLQUFLbUMscUJBQ0xuQyxLQUFLb0MsU0FBU3BDLEtBQUtLLFlBQ25CTCxLQUFLNEIsV0FBV1MsYUFBYSxNQUFPckMsS0FBS0csV0FDekNILEtBQUs0QixXQUFXUyxhQUFhLE1BQU9yQyxLQUFLQyxXQUN6Q0QsS0FBS3NCLE1BQU1OLGNBQWMsa0JBQWtCTyxZQUFjdkIsS0FBS0MsVUFDMURELEtBQUtTLFdBQWFULEtBQUtRLFVBQ3pCUixLQUFLc0IsTUFBTU4sY0FBYyxvQkFBb0JzQixNQUFNQyxRQUFVLFFBR3hEdkMsS0FBS3NCLEtBQ2QsR0FBQywwQkFFRCxXQUNFdEIsS0FBS3NCLE1BQU1XLFFBQ2IsTSxvRUFBQyxFQTVFTyxHLHlxQkNBSk8sRUFBYSxXQUNqQixXQUFZQyxFQUFNQyxJLDRGQUFjLFNBQzlCMUMsS0FBSzJDLE1BQVFGLEVBQ2J6QyxLQUFLNEMsY0FBZ0JGLEVBQ3JCMUMsS0FBSzZDLGFBQWU5QixTQUFTQyxjQUFjaEIsS0FBSzRDLGVBQ2hENUMsS0FBSzhDLGVBQWlCOUMsS0FBSzZDLGFBQWE3QixjQUFjaEIsS0FBSzJDLE1BQU1JLHNCQUNqRS9DLEtBQUtnRCxXQUFhQyxNQUFNQyxLQUFLbEQsS0FBSzZDLGFBQWFNLGlCQUFpQm5ELEtBQUsyQyxNQUFNUyxlQUM3RSxDLFFBbUVDLE8sRUFqRUQsRyxFQUFBLCtCQUNBLFdBQ0VwRCxLQUFLbUMsb0JBQ1AsR0FBQyw2QkFHRCxXQUFrQixXQUNoQm5DLEtBQUtxRCxxQkFFTHJELEtBQUtnRCxXQUFXTSxTQUFRLFNBQUNDLEdBQ3ZCLEVBQUtDLGdCQUFnQkQsRUFDdkIsR0FDRixHQUFDLGdDQUdELFdBQXFCLFdBQ25CdkQsS0FBS3FELHFCQUNMckQsS0FBS2dELFdBQVdNLFNBQVEsU0FBQ0MsR0FDdkJBLEVBQWExQixpQkFBaUIsU0FBUyxXQUNyQyxFQUFLNEIsU0FBU0YsR0FDZCxFQUFLRixvQkFDUCxHQUNGLEdBQ0YsR0FBQyxzQkFHRCxTQUFTRSxHQUNGQSxFQUFhRyxTQUFTQyxNQUd6QjNELEtBQUt3RCxnQkFBZ0JELEdBRnJCdkQsS0FBSzRELGdCQUFnQkwsRUFBY0EsRUFBYU0sa0JBSXBELEdBQUMsNkJBR0QsU0FBZ0JOLEVBQWNPLEdBQzVCLElBQU1DLEVBQWUvRCxLQUFLNkMsYUFBYTdCLGNBQWMsSUFBRCxPQUFLdUMsRUFBYVMsR0FBRSxXQUN4RVQsRUFBYXhCLFVBQVVDLElBQUloQyxLQUFLMkMsTUFBTXNCLGlCQUN0Q0YsRUFBYXhDLFlBQWN1QyxDQUM3QixHQUFDLDZCQUdELFNBQWdCUCxHQUNkLElBQU1RLEVBQWUvRCxLQUFLNkMsYUFBYTdCLGNBQWMsSUFBRCxPQUFLdUMsRUFBYVMsR0FBRSxXQUN4RVQsRUFBYXhCLFVBQVVFLE9BQU9qQyxLQUFLMkMsTUFBTXNCLGlCQUN6Q0YsRUFBYXhDLFlBQWMsRUFDN0IsR0FBQyxnQ0FHRCxXQUNNdkIsS0FBS2tFLG9CQUNQbEUsS0FBSzhDLGVBQWVmLFVBQVVDLElBQUloQyxLQUFLMkMsTUFBTXdCLHFCQUM3Q25FLEtBQUs4QyxlQUFlc0IsVUFBVyxJQUcvQnBFLEtBQUs4QyxlQUFlZixVQUFVRSxPQUFPakMsS0FBSzJDLE1BQU13QixxQkFDaERuRSxLQUFLOEMsZUFBZXVCLGdCQUFnQixZQUV4QyxHQUVBLDhCQUNBLFdBQ0UsT0FBT3JFLEtBQUtnRCxXQUFXc0IsTUFBSyxTQUFDZixHQUMzQixPQUFRQSxFQUFhRyxTQUFTQyxLQUNoQyxHQUNGLE0sb0VBQUMsRUExRWdCLEdDQWJZLEVBQW1CLENBQ3ZCN0IsYUFBYyxRQUNkVSxjQUFlLGVBQ2ZMLHFCQUFzQixVQUN0Qm9CLG9CQUFxQix3QkFDckJGLGdCQUFpQixxQix5cUJDTGJPLEVBQU8sV0FDWCxhQUEwQkMsR0FBbUIsSUFBL0JDLEVBQVEsRUFBUkEsVSw0RkFBUSxTQUNwQjFFLEtBQUsyRSxVQUFZRCxFQUNqQjFFLEtBQUs0RSxXQUFhN0QsU0FBU0MsY0FBY3lELEVBQzNDLEMsUUFVQyxPLEVBVkEsRyxFQUFBLDBCQUVELFNBQVlJLEdBQU8sV0FDakJBLEVBQU12QixTQUFRLFNBQUN3QixHQUNiLEVBQUtILFVBQVVHLEVBQ2pCLEdBQ0YsR0FBQyxxQkFFRCxTQUFRQyxHQUNOL0UsS0FBSzRFLFdBQVdJLFFBQVFELEVBQzFCLE0sb0VBQUMsRUFkVSxHLHlxQkNBUEUsRUFBSyxXQUNULFdBQVlDLEksNEZBQWUsU0FDekJsRixLQUFLbUYsT0FBU3BFLFNBQVNDLGNBQWNrRSxHQUNyQ2xGLEtBQUtvRixhQUFlcEYsS0FBS21GLE9BQU9uRSxjQUFjLGlCQUM5Q2hCLEtBQUtxRixnQkFBa0JyRixLQUFLcUYsZ0JBQWdCQyxLQUFLdEYsTUFDakRBLEtBQUt1RixvQkFBc0J2RixLQUFLdUYsb0JBQW9CRCxLQUFLdEYsS0FDM0QsQyxRQTZCQyxPLEVBN0JBLEcsRUFBQSxtQkFFRCxXQUNFQSxLQUFLbUYsT0FBT3BELFVBQVVDLElBQUksZ0JBQzFCakIsU0FBU2MsaUJBQWlCLFVBQVc3QixLQUFLcUYsZ0JBQzVDLEdBQUMsbUJBRUQsV0FDRXRFLFNBQVN5RSxvQkFBb0IsVUFBV3hGLEtBQUtxRixpQkFDN0NyRixLQUFLbUYsT0FBT3BELFVBQVVFLE9BQU8sZUFDL0IsR0FBQywrQkFFRCxXQUFvQixXQUNsQmpDLEtBQUtvRixhQUFhdkQsaUJBQWlCLFNBQVMsV0FDMUMsRUFBSzRELE9BQ1AsSUFDQXpGLEtBQUttRixPQUFPdEQsaUJBQWlCLFFBQVM3QixLQUFLdUYsb0JBQzdDLEdBQUMsNkJBRUQsU0FBZ0JHLEdBQ0UsV0FBWkEsRUFBSUMsS0FDTjNGLEtBQUt5RixPQUVULEdBQUMsaUNBRUQsU0FBb0JDLEdBQ2RBLEVBQUlFLFNBQVc1RixLQUFLbUYsUUFDdEJuRixLQUFLeUYsT0FFVCxNLG9FQUFDLEVBbkNRLEcsOGhEQ0F3QixJQUU3QkksRUFBYSxhLHFSQUFBLFUsUUFBQSxHLEVBQUEsRSwrWUFDakIsV0FBWVgsRUFBZVksR0FBc0IsTUFLVSxPLDRGQUxWLFVBQy9DLGNBQU1aLElBQ0RhLHNCQUF3QkQsRUFDN0IsRUFBS0UsTUFBUSxFQUFLYixPQUFPbkUsY0FBYyxTQUN2QyxFQUFLZ0MsV0FBYSxFQUFLZ0QsTUFBTTdDLGlCQUFpQixnQkFDOUMsRUFBSzhDLGNBQWdCLEVBQUtELE1BQU1oRixjQUFjLFdBQVcsQ0FDM0QsQ0E4QkMsTyxFQTlCQSxHLEVBQUEsOEJBRUQsV0FDRSxJQUFNa0YsRUFBYyxDQUFDLEVBSXJCLE9BSEFsRyxLQUFLZ0QsV0FBV00sU0FBUSxTQUFDNkMsR0FDdkJELEVBQVlDLEVBQU1uQyxJQUFNbUMsRUFBTUMsS0FDaEMsSUFDT0YsQ0FDVCxHQUFDLCtCQUVELFdBQW9CLFdBQ2xCLHNEQUNBbEcsS0FBS2dHLE1BQU1uRSxpQkFBaUIsVUFBVSxTQUFDNkQsR0FDckNBLEVBQUlXLGlCQUNKLEVBQUtOLHNCQUFzQixFQUFLTyxrQkFDbEMsR0FDRixHQUFDLG1CQUVELFdBQ0V0RyxLQUFLZ0csTUFBTU8sUUFDWCx5Q0FDRixHQUFDLCtCQUVELFNBQWtCQyxHQUVkeEcsS0FBS2lHLGNBQWMxRSxZQURqQmlGLEVBQytCLGVBR0EsV0FFckMsTSxvRUFBQyxFQXJDZ0IsQ0FBU3ZCLEcsOGhEQ0ZPLElBRTdCd0IsRUFBYyxhLHFSQUFBLFUsUUFBQSxHLEVBQUEsRSwrWUFDbEIsV0FBWXZCLEdBQWUsTUFHOEMsTyw0RkFIOUMsVUFDekIsY0FBTUEsSUFDRHdCLGVBQWlCM0YsU0FBU0MsY0FBYyw0QkFDN0MsRUFBSzJGLGNBQWdCNUYsU0FBU0MsY0FBYywyQkFBMkIsQ0FDekUsQ0FPQyxPLEVBUEEsRyxFQUFBLG1CQUVELFNBQUtkLEVBQU1FLEdBQ1QseUNBQ0FKLEtBQUswRyxlQUFlRSxJQUFNeEcsRUFDMUJKLEtBQUswRyxlQUFlRyxJQUFNM0csRUFDMUJGLEtBQUsyRyxjQUFjcEYsWUFBY3JCLENBQ25DLE0sb0VBQUMsRUFaaUIsQ0FBUytFLEcsOGhEQ0ZNLElBRTdCNkIsRUFBcUIsYSxxUkFBQSxVLFFBQUEsRyxFQUFBLEUsK1lBQ3pCLFdBQVk1QixHQUFlLE1BRXVCLE8sNEZBRnZCLFVBQ3pCLGNBQU1BLElBQ0RjLE1BQVEsRUFBS2IsT0FBT25FLGNBQWMsU0FBUyxDQUNsRCxDQVlDLE8sRUFaQSxHLEVBQUEsZ0NBRUQsV0FBb0IsV0FDbEIsc0RBQ0FoQixLQUFLZ0csTUFBTW5FLGlCQUFpQixVQUFVLFNBQUM2RCxHQUNyQ0EsRUFBSVcsaUJBQ0osRUFBS1UscUJBQ1AsR0FDRixHQUFDLG1DQUVELFNBQXNCQyxHQUNwQmhILEtBQUsrRyxvQkFBc0JDLENBQzdCLE0sb0VBQUMsRUFoQndCLENBQVMvQixHLHlxQkNGOUJnQyxFQUFRLFdBQ1osY0FBMkQsSUFBOUNDLEVBQVksRUFBWkEsYUFBY0MsRUFBYSxFQUFiQSxjQUFlQyxFQUFjLEVBQWRBLGdCLDRGQUFjLFNBQ3REcEgsS0FBS3FILE1BQVF0RyxTQUFTQyxjQUFja0csR0FDcENsSCxLQUFLc0gsT0FBU3ZHLFNBQVNDLGNBQWNtRyxHQUNyQ25ILEtBQUt1SCxRQUFVeEcsU0FBU0MsY0FBY29HLEVBQ3hDLEMsUUFjQyxPLEVBZEEsRyxFQUFBLDBCQUVELFdBS0UsT0FKQXBILEtBQUt3SCxVQUFZLENBQ2Z0SCxLQUFNRixLQUFLcUgsTUFBTTlGLFlBQ2pCa0csTUFBT3pILEtBQUtzSCxPQUFPL0YsYUFFZHZCLEtBQUt3SCxTQUNkLEdBQUMseUJBRUQsU0FBWUUsR0FDVjFILEtBQUtxSCxNQUFNOUYsWUFBY21HLEVBQVN4SCxLQUNsQ0YsS0FBS3NILE9BQU8vRixZQUFjbUcsRUFBU0QsTUFDbkN6SCxLQUFLdUgsUUFBUWpGLE1BQU1xRixnQkFBa0IsT0FBSCxPQUFVRCxFQUFTRSxPQUFNLElBQzdELE0sb0VBQUMsRUFuQlcsRyx5cUJDQVJDLEVBQUcsV0FDUCxXQUFZQyxJLDRGQUFTLFNBQ25COUgsS0FBSytILFNBQVdELEVBQVFFLFFBQ3hCaEksS0FBS2lJLFNBQVdILEVBQVFJLE9BQzFCLEMsUUE2SUMsTyxFQTdJQSxHLEVBQUEsNkJBRUQsV0FDRSxPQUFPQyxRQUFRQyxJQUFJLENBQUNwSSxLQUFLcUksa0JBQW1CckksS0FBS3NJLGVBQ25ELEdBQUMsNkJBRUQsV0FDRSxPQUFPQyxNQUFNLEdBQUQsT0FBSXZJLEtBQUsrSCxTQUFRLFVBQVUsQ0FDckNHLFFBQVNsSSxLQUFLaUksV0FFYk8sTUFBSyxTQUFBQyxHQUNKLE9BQUlBLEVBQVNDLEdBQ0pELEVBQVNFLE9BRVhSLFFBQVFTLE9BQU8sV0FBRCxPQUFZSCxFQUFTSSxRQUM1QyxJQUNDQyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2QsR0FDSixHQUFDLHlCQUVELFdBQ0UsT0FBT1IsTUFBTSxHQUFELE9BQUl2SSxLQUFLK0gsU0FBUSxhQUFhLENBQ3hDRyxRQUFTbEksS0FBS2lJLFdBRWJPLE1BQUssU0FBQVUsR0FDSixPQUFJQSxFQUFJUixHQUNDUSxFQUFJUCxPQUVOUixRQUFRUyxPQUFPLFdBQUQsT0FBWU0sRUFBSUwsUUFDdkMsSUFDQ0MsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixFQUNkLEdBQ0osR0FBQywwQkFFRCxTQUFhN0ksRUFBTXVILEdBQ2pCLE9BQU9jLE1BQU0sR0FBRCxPQUFJdkksS0FBSytILFNBQVEsYUFBYSxDQUN4Q29CLE9BQVEsUUFDUmpCLFFBQVNsSSxLQUFLaUksU0FDZG1CLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkJwSixLQUFNQSxFQUNOdUgsTUFBT0EsTUFHUmUsTUFBSyxTQUFBVSxHQUNKLE9BQUlBLEVBQUlSLEdBQ0NRLEVBQUlQLE9BRU5SLFFBQVFTLE9BQU8sV0FBRCxPQUFZTSxFQUFJTCxRQUN2QyxJQUNDQyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2QsR0FDSixHQUFDLHdCQUVELFNBQVc3SSxFQUFNRSxHQUNmLE9BQU9tSSxNQUFNLEdBQUQsT0FBSXZJLEtBQUsrSCxTQUFRLFVBQVUsQ0FDckNvQixPQUFRLE9BQ1JqQixRQUFTbEksS0FBS2lJLFNBQ2RtQixLQUFNQyxLQUFLQyxVQUFVLENBQ25CcEosS0FBTUEsRUFDTkUsS0FBTUEsTUFHUG9JLE1BQUssU0FBQVUsR0FDSixPQUFJQSxFQUFJUixHQUNDUSxFQUFJUCxPQUVOUixRQUFRUyxPQUFPLFdBQUQsT0FBWU0sRUFBSUwsUUFDdkMsSUFDQ0MsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixFQUNkLEdBQ0osR0FBQywwQkFFRCxTQUFhL0UsR0FDWCxPQUFPdUUsTUFBTSxHQUFELE9BQUl2SSxLQUFLK0gsU0FBUSxrQkFBVS9ELEdBQU0sQ0FDM0NtRixPQUFRLFNBQ1JqQixRQUFTbEksS0FBS2lJLFdBRWJPLE1BQUssU0FBQVUsR0FDSixPQUFJQSxFQUFJUixHQUNDUSxFQUFJUCxPQUVOUixRQUFRUyxPQUFPLFdBQUQsT0FBWU0sRUFBSUwsUUFDdkMsSUFDQ0MsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixFQUNkLEdBQ0osR0FBQyxzQkFFRCxTQUFTL0UsR0FDUCxPQUFPdUUsTUFBTSxHQUFELE9BQUl2SSxLQUFLK0gsU0FBUSxrQkFBVS9ELEVBQUUsVUFBVSxDQUNqRG1GLE9BQVEsTUFDUmpCLFFBQVNsSSxLQUFLaUksV0FFYk8sTUFBSyxTQUFBVSxHQUNKLE9BQUlBLEVBQUlSLEdBQ0NRLEVBQUlQLE9BRU5SLFFBQVFTLE9BQU8sV0FBRCxPQUFZTSxFQUFJTCxRQUN2QyxJQUNDQyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2QsR0FDSixHQUFDLHdCQUVELFNBQVcvRSxHQUNULE9BQU91RSxNQUFNLEdBQUQsT0FBSXZJLEtBQUsrSCxTQUFRLGtCQUFVL0QsRUFBRSxVQUFVLENBQ2pEbUYsT0FBUSxTQUNSakIsUUFBU2xJLEtBQUtpSSxXQUViTyxNQUFLLFNBQUFVLEdBQ0osT0FBSUEsRUFBSVIsR0FDQ1EsRUFBSVAsT0FFTlIsUUFBUVMsT0FBTyxXQUFELE9BQVlNLEVBQUlMLFFBQ3ZDLElBQ0NDLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxHQUNKLEdBQUMsd0JBRUQsU0FBVzNJLEdBQ1QsT0FBT21JLE1BQU0sR0FBRCxPQUFJdkksS0FBSytILFNBQVEsb0JBQW9CLENBQy9Db0IsT0FBUSxRQUNSakIsUUFBU2xJLEtBQUtpSSxTQUNkbUIsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQjFCLE9BQVF4SCxNQUdUb0ksTUFBSyxTQUFBVSxHQUNKLE9BQUlBLEVBQUlSLEdBQ0NRLEVBQUlQLE9BRU5SLFFBQVFTLE9BQU8sV0FBRCxPQUFZTSxFQUFJTCxRQUN2QyxJQUNDQyxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2QsR0FDSixNLG9FQUFDLEVBakpNLEdDQUlRLEVBQW9CeEksU0FBU0MsY0FBYyx1QkFDM0N3SSxFQUFtQnpJLFNBQVNDLGNBQWMsbUNBQzFDeUksRUFBa0IxSSxTQUFTQyxjQUFjLGtDQUN6QzBJLEVBQWdCM0ksU0FBU0MsY0FBYyx5QkFDdkMySSxFQUFjNUksU0FBU0MsY0FBYyw2QkFDckM0SSxFQUFjN0ksU0FBU0MsY0FBYyxzQ0FDckM2SSxFQUFjOUksU0FBU0MsY0FBYyxzQ0FDckM4SSxFQUFtQi9JLFNBQVNDLGNBQWMsaUNBQzFDK0ksRUFBcUJoSixTQUFTQyxjQUFjLDRCQ2FuRGdKLEVBQU0sSUFBSW5DLEVEWlMsQ0FDdkJHLFFBQVMsOENBQ1RFLFFBQVMsQ0FDUCtCLGNBQWUsdUNBQ2YsZUFBZ0Isc0JDV2RDLEVBQWUsSUFBSTFGLEVBQVEsQ0FDL0JFLFNBQVUsU0FBQ3lGLEdBQ1RELEVBQWFFLFFBQVFDLEdBQVdGLEdBQ2xDLEdBQ0MsYUFHR0UsR0FBYSxTQUFDRixHQUNsQixJQUFNRyxFQUFPLElBQUk3SyxFQUFLLENBQ3BCRSxLQUFNd0ssRUFDTnZLLE9BQUFBLEdBRUFDLGdCQUFpQixXQXBCTSxJQUFDSyxFQUFNRSxFQUFORixFQXFCSGlLLEVBQVNqSyxLQXJCQUUsRUFxQk0rSixFQUFTL0osS0FwQi9DbUssR0FBY0MsS0FBS3RLLEVBQU1FLEVBcUJ2QixFQUVBTixnQkFBaUIsU0FBQ2tFLEdBQ1pzRyxFQUFLN0ksVUFDUHVJLEVBQUlTLFdBQVd6RyxHQUNad0UsTUFBSyxTQUFBa0MsR0FDSkosRUFBS2xJLFNBQVNzSSxFQUFZcEssTUFDNUIsSUFDQ3dJLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxJQUdGaUIsRUFBSVcsU0FBUzNHLEdBQ1Z3RSxNQUFLLFNBQUFrQyxHQUNKSixFQUFLbEksU0FBU3NJLEVBQVlwSyxNQUM1QixJQUNDd0ksT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixFQUNkLEdBRU4sRUFFQWhKLHNCQUF1QixTQUFDaUUsR0FDdEI0RyxHQUFnQkosT0FDaEJJLEdBQWdCQyx1QkFBc0IsV0FDcENiLEVBQUljLGFBQWE5RyxHQUNkd0UsTUFBSyxTQUFBVSxHQUNGb0IsRUFBS1MsZUFDTEgsR0FBZ0JuRixPQUNwQixJQUNDcUQsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixFQUNkLEdBQ0osR0FDRixHQUNHLGFBQ0wsT0FBT3VCLEVBQUtVLGNBQ2QsRUFFSXBMLEdBQVMsR0FHYm9LLEVBQUlpQixpQkFDRHpDLE1BQUssU0FBQTBDLEdBQ0osSUFBTUMsRUFBa0JELEVBQVksR0FDcENDLEVBQWdCQyxVQUNoQixJQUFNQyxFQUFrQkgsRUFBWSxHQUNwQ3RMLEdBQVN5TCxFQUFnQjlLLElBQ3pCMkosRUFBYW9CLFlBQVlILEdBQ3pCSSxHQUFTQyxZQUFZSCxFQUN2QixJQUdGLElBQU1JLEdBQTRCLElBQUlqSixFQUFjK0IsRUFBa0IsMkJBR2hFbUgsR0FBb0IsSUFBSWxKLEVBQWMrQixFQUFrQiw2QkFHeERvSCxHQUF1QixJQUFJbkosRUFBYytCLEVBQWtCLGlDQUczRGdILEdBQVcsSUFBSXRFLEVBQVMsQ0FDNUJDLGFBQWMsaUJBQ2RDLGNBQWUsZ0JBQ2ZDLGVBQWdCLGlDQUlad0UsR0FBZSxJQUFJL0YsRUFBYyxrQkFBa0IsU0FBQzZCLEdBQ3hEa0UsR0FBYUMsbUJBQWtCLEdBQy9CN0IsRUFBSThCLGFBQWFwRSxFQUFTeEgsS0FBTXdILEVBQVNELE9BQ3RDZSxNQUFLLFNBQUF1RCxHQUNGUixHQUFTQyxZQUFZTyxHQUNyQkgsR0FBYUMsbUJBQWtCLEdBQy9CRCxHQUFhbkcsT0FDakIsSUFDQ3FELE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxHQUNKLElBR01pRCxHQUFlLElBQUluRyxFQUFjLG9CQUFvQixXQUN6RG1HLEdBQWFILG1CQUFrQixHQUMvQkksS0FDQUQsR0FBYUgsbUJBQWtCLEVBQ2pDLElBR01qQixHQUFrQixJQUFJOUQsRUFBc0IsMkJBRzVDb0YsR0FBb0IsSUFBSXJHLEVBQWMsd0JBQXdCLFNBQUNlLEdBQ25Fc0YsR0FBa0JMLG1CQUFrQixHQUNwQzdCLEVBQUltQyxXQUFXdkYsRUFBSWdCLFFBQ2hCWSxNQUFLLFNBQUE0RCxHQUNKYixHQUFTQyxZQUFZWSxFQUN2QixJQUNDdEQsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixFQUNkLElBQ0NzRCxTQUFRLGtCQUFNSCxHQUFrQkwsbUJBQWtCLEVBQU0sSUFDM0RLLEdBQWtCekcsT0FDcEIsSUFHTThFLEdBQWdCLElBQUk5RCxFQUFlLHFCQUd6QzhELEdBQWMrQixvQkFDZFYsR0FBYVUsb0JBQ2JOLEdBQWFNLG9CQUNiMUIsR0FBZ0IwQixvQkFDaEJKLEdBQWtCSSxvQkFHbEIsSUFBTUwsR0FBMkIsV0FDL0JqQyxFQUFJdUMsV0FBVzNDLEVBQVl4RCxNQUFPeUQsRUFBWXpELE9BQzNDb0MsTUFBSyxTQUFBZ0UsR0FDRnRDLEVBQWFFLFFBQVFDLEdBQVdtQyxJQUNoQ1IsR0FBYXZHLE9BQ2pCLElBQ0NxRCxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2QsR0FDSixFQStCQVEsRUFBa0IxSCxpQkFBaUIsU0FyQkQsV0FQbEMsSUFDUTZGLEVBT04rRCxHQUEwQmdCLGtCQUMxQmIsR0FBYXBCLE9BUlA5QyxFQUFXNkQsR0FBU2pELGNBQzFCa0IsRUFBaUJwRCxNQUFRc0IsRUFBU3hILEtBQ2xDdUosRUFBZ0JyRCxNQUFRc0IsRUFBU0QsS0FRbkMsSUFvQkFpQyxFQUFjN0gsaUJBQWlCLFNBakJHLFdBQ2hDNkosR0FBa0JlLGtCQUNsQjlDLEVBQVlwRCxRQUNaeUYsR0FBYXhCLE1BQ2YsSUFnQkFULEVBQW1CbEksaUJBQWlCLFNBYkcsV0FDckM4SixHQUFxQmMsa0JBQ3JCM0MsRUFBaUJ2RCxRQUNqQjJGLEdBQWtCMUIsTUFDcEIsSUFZQWlCLEdBQTBCaUIsbUJBQzFCaEIsR0FBa0JnQixtQkFDbEJmLEdBQXFCZSxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvdmFsaWRhdGlvbkNvbmZpZy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCB1c2VySWQsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUNsaWNrLCBoYW5kbGVEZWxldGVJY29uQ2xpY2sgfSwgdGVtcGxhdGUpIHtcbiAgICB0aGlzLl9jYXJkTmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9jYXJkTGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb25DbGljayA9IGhhbmRsZURlbGV0ZUljb25DbGljaztcbiAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZSkuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBpc0xpa2VkKCkge1xuICAgIGNvbnN0IHVzZXJBbHJlYWR5TGlrZWRDYXJkID0gdGhpcy5fY2FyZExpa2VzLmZpbmQodXNlciA9PiB1c2VyLl9pZCA9PT0gdGhpcy5fdXNlcklkKTtcbiAgICByZXR1cm4gdXNlckFscmVhZHlMaWtlZENhcmQ7XG4gIH1cblxuICBzZXRMaWtlcyh1cGRhdGVkTGlrZXMpIHtcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSB1cGRhdGVkTGlrZXM7XG4gICAgY29uc3QgbGlrZUNvdW50ZXIgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50Jyk7XG4gICAgbGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkTGlrZXMubGVuZ3RoO1xuXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XG4gICAgICB0aGlzLl9saWtlVG9nZ2xlT25IYW5kbGVyKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZVRvZ2dsZU9mZkhhbmRsZXIoKTtcbiAgICB9XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKCk7XG4gICAgfSlcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19yZW1vdmUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb25DbGljayh0aGlzLl9pZCk7XG4gICAgfSlcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcy5faWQpO1xuICAgIH0pXG4gIH1cblxuICBfbGlrZVRvZ2dsZU9uSGFuZGxlcigpIHtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKTtcbiAgICB0aGlzLl9jYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X19saWtlX2FjdGl2ZScpO1xuICB9XG5cbiAgX2xpa2VUb2dnbGVPZmZIYW5kbGVyKCkge1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpO1xuICAgIHRoaXMuX2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnRfX2xpa2VfYWN0aXZlJyk7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuc2V0TGlrZXModGhpcy5fY2FyZExpa2VzKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLl9jYXJkTGluayk7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgdGhpcy5fY2FyZE5hbWUpO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX25hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX2NhcmROYW1lO1xuICAgIGlmICh0aGlzLl9vd25lcklkICE9PSB0aGlzLl91c2VySWQpIHtcbiAgICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3JlbW92ZScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cblxuICBkZWxldGVNeUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcbiAgfVxufVxuXG5leHBvcnQgeyBDYXJkIH1cbiIsImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25mLCBmb3JtU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9jb25mID0gY29uZjtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5fY3VycmVudEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2Zvcm1TZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2N1cnJlbnRGb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY29uZi5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9jdXJyZW50Rm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmYuaW5wdXRTZWxlY3RvcikpO1xuICB9XG5cbiAgLy8g0JLQutC70Y7Rh9Cw0LXQvCDQstGB0LUg0LLQsNC70LjQtNCw0YbQuNC4XG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfTtcblxuICAvLyDQpdC10L3QtNC70LjQvCDQt9Cw0LLQuNGB0YjQuNC1INCy0LDQu9C40LTQsNGG0LjQuCDQuCDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvdC+0L/QutC4XG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfTtcblxuICAgLy8g0JLQtdGI0LDQtdC8INC70LjRgdC10L3QtdGA0Ysg0L3QsCDQuNC90L/Rg9GC0YtcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9pc1ZhbGlkKGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LLQsNC70LjQtNC90L7RgdGC0Ywg0L/QvtC70Y8g0Lgg0L/QvtC60LDQt9GL0LLQsNC10Lwg0L7RiNC40LHQutGDINC10YHQu9C4INC90LVcbiAgX2lzVmFsaWQoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLy8g0JTQvtCx0LDQstC70Y/QtdC8INC60LvQsNGB0YEg0YEg0L7RiNC40LHQutC+0LlcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fY3VycmVudEZvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZi5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgfTtcblxuICAvLyDQo9C00LDQu9GP0LXQvCDQutC70LDRgdGBINGBINC+0YjQuNCx0LrQvtC5XG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9jdXJyZW50Rm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZi5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9O1xuXG4gIC8vINCf0LXRgNC10LrQu9GO0YfQsNC10Lwg0YHQvtGB0YLQvtGP0L3QuNGPINC60L3QvtC/0LrQuCDRgdCw0LHQvNC40YLQsFxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZi5pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmYuaW5hY3RpdmVCdXR0b25DbGFzcylcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9XG5cbiAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC90LDQu9C40YfQuNC1INGF0L7RgtGPINCx0Ysg0L7QtNC90L7Qs9C+INC90LXQstCw0LvQuNC00L3QvtCz0L4g0LjQvdC/0YPRgtCwXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IHsgRm9ybVZhbGlkYXRvciB9XG4iLCJjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5zdWJtaXQnLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbi1pbnZhbGlkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX3R5cGUtZXJyb3InXG59XG5cbmV4cG9ydCB7IHZhbGlkYXRpb25Db25maWcgfVxuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVyRmluYWwoaXRlbXMpIHtcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KVxuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgU2VjdGlvbiB9XG4iLCJjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZU92ZXJsYXlDbGljayA9IHRoaXMuX2hhbmRsZU92ZXJsYXlDbGljay5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBfaGFuZGxlT3ZlcmxheUNsaWNrKGV2dCkge1xuICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cCkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBQb3B1cCB9XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXNzaW9uKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pc3Npb24gPSBoYW5kbGVGb3JtU3VibWlzc2lvbjtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLnN1Ym1pdCcpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5pZF0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KVxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXNzaW9uKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmdUZXh0KGlzTG9hZGluZykge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uJztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJztcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgUG9wdXBXaXRoRm9ybSB9XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FyZEltYWdlVmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWV3LW1lc3RvLXBvcHVwX19pbWFnZScpO1xuICAgIHRoaXMuX2NhcmROYW1lVmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy52aWV3LW1lc3RvLXBvcHVwX19uYW1lJyk7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fY2FyZEltYWdlVmlldy5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZVZpZXcuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9jYXJkTmFtZVZpZXcudGV4dENvbnRlbnQgPSBuYW1lO1xuICB9XG59XG5cbmV4cG9ydCB7IFBvcHVwV2l0aEltYWdlIH1cbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVDb25maXJtYXRpb24oKTtcbiAgICB9KVxuICB9XG5cbiAgc2V0SGFuZGxlQ29uZmlybWF0aW9uKGhhbmRsZXIpIHtcbiAgICB0aGlzLl9oYW5kbGVDb25maXJtYXRpb24gPSBoYW5kbGVyO1xuICB9XG59XG5cbmV4cG9ydCB7IFBvcHVwV2l0aENvbmZpcm1hdGlvbiB9XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHtuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yfSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgdGhpcy5fdXNlckRhdGEgPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl91c2VyRGF0YTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHVzZXJEYXRhKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IHVzZXJEYXRhLm5hbWU7XG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSB1c2VyRGF0YS5hYm91dDtcbiAgICB0aGlzLl9hdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3VzZXJEYXRhLmF2YXRhcn0pYDtcbiAgfVxufVxuXG5leHBvcnQgeyBVc2VySW5mbyB9XG4iLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuICB9XG5cbiAgZ2V0SW5pdGlhbEluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldEluaXRpYWxDYXJkcygpLCB0aGlzLmdldFVzZXJJbmZvKCldKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKGNhcmRMaXN0ID0+IHtcbiAgICAgICAgaWYgKGNhcmRMaXN0Lm9rKSB7XG4gICAgICAgICAgcmV0dXJuIGNhcmRMaXN0Lmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtjYXJkTGlzdC5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBlZGl0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXRcbiAgICAgIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGFkZE5ld0NhcmQobmFtZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgbGluazogbGlua1xuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlTXlDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgbGlrZUNhcmQoaWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICB1bmxpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZWRpdEF2YXRhcihsaW5rKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogbGlua1xuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCB7IEFwaSB9XG4iLCJleHBvcnQgY29uc3QgYnV0dG9uRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1pbmZvJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZVBvcHVwTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlLXBvcHVwX19pbnB1dF90eXBlX25hbWUnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlUG9wdXBKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZS1wb3B1cF9faW5wdXRfdHlwZV9qb2InKTtcbmV4cG9ydCBjb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1lbGVtZW50Jyk7XG5leHBvcnQgY29uc3QgY2FyZEFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLW1lc3RvLXBvcHVwX19jb250ZW50Jyk7XG5leHBvcnQgY29uc3QgY2FyZEFkZE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLW1lc3RvLXBvcHVwX19pbnB1dF90eXBlX21lc3RvJyk7XG5leHBvcnQgY29uc3QgY2FyZEFkZExpbmsgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLW1lc3RvLXBvcHVwX19pbnB1dF90eXBlX2ltYWdlJyk7XG5leHBvcnQgY29uc3QgdXBkYXRlQXZhdGFyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51cGRhdGUtYXZhdGFyLXBvcHVwX19jb250ZW50Jyk7XG5leHBvcnQgY29uc3QgdXBkYXRlQXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1vdmVybGF5Jyk7XG5leHBvcnQgY29uc3QgYXBpQ29uZmlnID0ge1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC01NScsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiAnOGYwYjQ5OGYtMWU4OC00YWFlLTk0NWEtMjZhNWVjYWJkZTZlJyxcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn07XG4iLCJpbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCB7IHZhbGlkYXRpb25Db25maWcgfSBmcm9tIFwiLi4vdXRpbHMvdmFsaWRhdGlvbkNvbmZpZy5qc1wiO1xuaW1wb3J0IHsgU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhJbWFnZSB9IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgeyBQb3B1cFdpdGhDb25maXJtYXRpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanNcIjtcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7IEFwaSB9IGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IHsgYnV0dG9uRWRpdFByb2ZpbGUsIHByb2ZpbGVQb3B1cE5hbWUsIHByb2ZpbGVQb3B1cEpvYiwgY2FyZEFkZEJ1dHRvbiwgY2FyZEFkZEZvcm0sXG4gIGNhcmRBZGROYW1lLCBjYXJkQWRkTGluaywgYXBpQ29uZmlnLCB1cGRhdGVBdmF0YXJGb3JtLCB1cGRhdGVBdmF0YXJCdXR0b24gfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cblxuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbi8vINCf0YDQvtC60LjQtNGL0LLQsNC10Lwg0YXQtdC90LTQu9C40L3QsyDQv9C+0L/QsNC/0LAg0L/RgNC+0YHQvNC+0YLRgNCwINC60LDRgNGC0L7Rh9C60Lgg0LIg0LrQu9Cw0YHRgSDRgdC+0LfQtNCw0L3QuNGPINC60LDRgNGC0L7Rh9C60LhcbmNvbnN0IG9wZW5DYXJkRnVsbFNjcmVlbiA9IChuYW1lLCBsaW5rKSA9PiB7XG4gIHBvcHVwWm9vbUNhcmQub3BlbihuYW1lLCBsaW5rKTtcbn1cblxuLy8g0KHQvtC30LTQsNC10Lwg0LjQvdGB0YLQsNC90YEg0LrQu9Cw0YHRgdCwINC30LDQv9GA0L7RgdC+0LJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmlnKTtcblxuLy8g0KHQvtC30LTQsNC10Lwg0LjQvdGB0YLQsNC90YEg0LrQu9Cw0YHRgdCwIFNlY3Rpb25cbmNvbnN0IGNhcmRzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcbiAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgIGNhcmRzU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZERhdGEpKTtcbiAgfVxufSwgJy5lbGVtZW50cycpXG5cbi8vINCh0L7Qt9C00LDQtdC8INC90L7QstGD0Y4g0LrQsNGA0YLQvtGH0LrRg1xuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoe1xuICAgIGRhdGE6IGNhcmREYXRhLFxuICAgIHVzZXJJZCxcbiAgICAvLyDQn9GA0L7QutC40LTRi9Cy0LDQtdC8INGF0LXQvdC00LvQtdGAINC30YPQvNCwINC60LDRgNGC0L7Rh9C60LhcbiAgICBoYW5kbGVDYXJkQ2xpY2s6ICgpID0+IHtcbiAgICAgIG9wZW5DYXJkRnVsbFNjcmVlbihjYXJkRGF0YS5uYW1lLCBjYXJkRGF0YS5saW5rKVxuICAgIH0sXG4gICAgLy8g0J/RgNC+0LrQuNC00YvQstCw0LXQvCDRhdC10L3QtNC70LXRgCDQu9Cw0LnQutC+0LJcbiAgICBoYW5kbGVMaWtlQ2xpY2s6IChpZCkgPT4ge1xuICAgICAgaWYgKGNhcmQuaXNMaWtlZCgpKSB7XG4gICAgICAgIGFwaS51bmxpa2VDYXJkKGlkKVxuICAgICAgICAgIC50aGVuKHVwZGF0ZWRDYXJkID0+IHtcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZXModXBkYXRlZENhcmQubGlrZXMpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgYXBpLmxpa2VDYXJkKGlkKVxuICAgICAgICAgIC50aGVuKHVwZGF0ZWRDYXJkID0+IHtcbiAgICAgICAgICAgIGNhcmQuc2V0TGlrZXModXBkYXRlZENhcmQubGlrZXMpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyDQn9GA0L7QutC40LTRi9Cy0LDQtdC8INGF0LXQvdC00LvQtdGAINGD0LTQsNC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuICAgIGhhbmRsZURlbGV0ZUljb25DbGljazogKGlkKSA9PiB7XG4gICAgICBwb3B1cERlbGV0ZUNhcmQub3BlbigpO1xuICAgICAgcG9wdXBEZWxldGVDYXJkLnNldEhhbmRsZUNvbmZpcm1hdGlvbigoKSA9PiB7XG4gICAgICAgIGFwaS5yZW1vdmVNeUNhcmQoaWQpXG4gICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgY2FyZC5kZWxldGVNeUNhcmQoKTtcbiAgICAgICAgICAgICAgcG9wdXBEZWxldGVDYXJkLmNsb3NlKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICB9LCAnLnRlbXBsYXRlJyk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufTtcblxubGV0IHVzZXJJZCA9ICcnO1xuXG4vLyDQodC+0LHQuNGA0LDQtdC8INC40L3RhNGDINC00LvRjyDQvdCw0YfQsNC70YzQvdC+0Lkg0LfQsNCz0YDRg9C30LrQuCDRgdGC0YDQsNC90LjRhtGLXG5hcGkuZ2V0SW5pdGlhbEluZm8oKVxuICAudGhlbihpbml0aWFsRGF0YSA9PiB7XG4gICAgY29uc3QgaW5pdGlhbENhcmRMaXN0ID0gaW5pdGlhbERhdGFbMF07XG4gICAgaW5pdGlhbENhcmRMaXN0LnJldmVyc2UoKTtcbiAgICBjb25zdCBpbml0aWFsVXNlckluZm8gPSBpbml0aWFsRGF0YVsxXTtcbiAgICB1c2VySWQgPSBpbml0aWFsVXNlckluZm8uX2lkO1xuICAgIGNhcmRzU2VjdGlvbi5yZW5kZXJGaW5hbChpbml0aWFsQ2FyZExpc3QpO1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGluaXRpYWxVc2VySW5mbyk7XG4gIH0pXG5cbi8vINCh0L7Qt9C00LDQtdC8INC40L3RgdGC0LDQvdGBINCy0LDQu9C40LTQsNGC0L7RgNCwINC/0L7Qv9Cw0L/QsCDQv9GA0L7RhNC40LvRj1xuY29uc3QgcHJvZmlsZVBvcHVwRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsICcucHJvZmlsZS1wb3B1cF9fY29udGVudCcpO1xuXG4vLyDQodC+0LfQtNCw0LXQvCDQuNC90YHRgtCw0L3RgSDQstCw0LvQuNC00LDRgtC+0YDQsCDQv9C+0L/QsNC/0LAg0YHQvtC30LTQsNC90LjRjyDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60LhcbmNvbnN0IGNhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkNvbmZpZywgJy5hZGQtbWVzdG8tcG9wdXBfX2NvbnRlbnQnKTtcblxuLy8g0KHQvtC30LTQsNC10Lwg0LjQvdGB0YLQsNC90YEg0LLQsNC70LjQtNCw0YLQvtGA0LAg0L/QvtC/0LDQv9CwINC+0LHQvdC+0LLQu9C10L3QuNGPINCw0LLQsNGC0LDRgNCwXG5jb25zdCB1cGRhdGVQb3B1cFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsICcudXBkYXRlLWF2YXRhci1wb3B1cF9fY29udGVudCcpO1xuXG4vLyDQodC+0LfQtNCw0LXQvCDQuNC90YHRgtCw0L3RgSDRhdC10L3QtNC70LXRgNCwINC40L3RhNGLINC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsXG4gIGFib3V0U2VsZWN0b3I6ICcucHJvZmlsZV9fam9iJyxcbiAgYXZhdGFyU2VsZWN0b3I6ICcucHJvZmlsZV9fZWRpdC1hdmF0YXItYnV0dG9uJ1xufSk7XG5cbi8vINCh0L7Qt9C00LDQtdC8INC40L3RgdGC0LDQvdGBINC/0L7Qv9Cw0L/QsCDQv9GA0L7RhNC40LvRj1xuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wcm9maWxlLXBvcHVwJywgKHVzZXJEYXRhKSA9PiB7XG4gIHBvcHVwUHJvZmlsZS5yZW5kZXJMb2FkaW5nVGV4dCh0cnVlKTtcbiAgYXBpLmVkaXRVc2VySW5mbyh1c2VyRGF0YS5uYW1lLCB1c2VyRGF0YS5hYm91dClcbiAgICAudGhlbih1cGRhdGVkVXNlckluZm8gPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1cGRhdGVkVXNlckluZm8pO1xuICAgICAgICBwb3B1cFByb2ZpbGUucmVuZGVyTG9hZGluZ1RleHQoZmFsc2UpXG4gICAgICAgIHBvcHVwUHJvZmlsZS5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSlcbn0pO1xuXG4vLyDQodC+0LfQtNCw0LXQvCDQuNC90YHRgtCw0L3RgSDQv9C+0L/QsNC/0LAg0LTQvtCx0LDQstC70LXQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLmFkZC1tZXN0by1wb3B1cCcsICgpID0+IHtcbiAgcG9wdXBBZGRDYXJkLnJlbmRlckxvYWRpbmdUZXh0KHRydWUpO1xuICBoYW5kbGVBZGRDYXJkUG9wdXBTdWJtaXQoKTtcbiAgcG9wdXBBZGRDYXJkLnJlbmRlckxvYWRpbmdUZXh0KGZhbHNlKTtcbn0pO1xuXG4vLyDQodC+0LfQtNCw0LXQvCDQuNC90YHRgtCw0L3RgSDQv9C+0L/QsNC/0LAg0L/QvtC00YLQstC10YDQttC00LXQvdC40Y8g0YPQtNCw0LvQtdC90LjRjyDQutCw0YDRgtC+0YfQutC4XG5jb25zdCBwb3B1cERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcuZGVsZXRpb24tY29uZmlybS1wb3B1cCcpO1xuXG4vLyDQodC+0LfQtNCw0LXQvCDQuNC90YHRgtCw0L3RgSDQv9C+0L/QsNC/0LAg0L7QsdC90L7QstC70LXQvdC40Y8g0LDQstCw0YLQsNGA0LBcbmNvbnN0IHBvcHVwVXBkYXRlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy51cGRhdGUtYXZhdGFyLXBvcHVwJywgKHNyYykgPT4ge1xuICBwb3B1cFVwZGF0ZUF2YXRhci5yZW5kZXJMb2FkaW5nVGV4dCh0cnVlKTtcbiAgYXBpLmVkaXRBdmF0YXIoc3JjLmF2YXRhcilcbiAgICAudGhlbih1cGRhdGVkVXNlckRhdGEgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8odXBkYXRlZFVzZXJEYXRhKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pXG4gICAgLmZpbmFsbHkoKCkgPT4gcG9wdXBVcGRhdGVBdmF0YXIucmVuZGVyTG9hZGluZ1RleHQoZmFsc2UpKVxuICBwb3B1cFVwZGF0ZUF2YXRhci5jbG9zZSgpO1xufSk7XG5cbi8vINCh0L7Qt9C00LDQtdC8INC40L3RgdGC0LDQvdGBINC/0L7Qv9Cw0L/QsCDQv9GA0L7RgdC80L7RgtGA0LAg0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgcG9wdXBab29tQ2FyZCA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnZpZXctbWVzdG8tcG9wdXAnKTtcblxuLy8g0JLQtdGI0LDQtdC8INC70LjRgdC10L3QtdGA0Ysg0L3QsCDQstGB0LUg0LLQuNC00Ysg0L/QvtC/0LDQv9C+0LJcbnBvcHVwWm9vbUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cERlbGV0ZUNhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwVXBkYXRlQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vINCl0LXQvdC00LvQuNC8INGB0LDQsdC80LjRgiDQsiDQv9C+0L/QsNC/0LUg0LTQvtCx0LDQstC70LXQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuFxuY29uc3QgaGFuZGxlQWRkQ2FyZFBvcHVwU3VibWl0ID0gKCkgPT4ge1xuICBhcGkuYWRkTmV3Q2FyZChjYXJkQWRkTmFtZS52YWx1ZSwgY2FyZEFkZExpbmsudmFsdWUpXG4gICAgLnRoZW4obmV3Q2FyZERhdGEgPT4ge1xuICAgICAgICBjYXJkc1NlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKG5ld0NhcmREYXRhKSk7XG4gICAgICAgIHBvcHVwQWRkQ2FyZC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbi8vINCX0LDQv9C+0LvQvdGP0LXQvCDRhNC+0YDQvNGDINC/0YDQvtGE0LjQu9GPXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUluZm9Gb3JtKCkge1xuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIHByb2ZpbGVQb3B1cE5hbWUudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xuICBwcm9maWxlUG9wdXBKb2IudmFsdWUgPSB1c2VyRGF0YS5hYm91dDtcbn1cblxuLy8g0J7RgtC60YDRi9Cy0LDQtdC8INC/0L7Qv9Cw0L8g0L/RgNC+0YTQuNC70Y8sINC/0LXRgNC10LfQsNC/0L7Qu9C90Y/QtdC8INGE0L7RgNC80YMg0Lgg0L7Rh9C40YnQsNC10Lwg0LfQsNCy0LjRgdGI0LjQtSDQvtGI0LjQsdC60Lgg0LLQsNC70LjQtNCw0YbQuNC4XG5jb25zdCBoYW5kbGVQcm9maWxlUG9wdXBPcGVuaW5nID0gKCkgPT4ge1xuICBwcm9maWxlUG9wdXBGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICBwb3B1cFByb2ZpbGUub3BlbigpO1xuICBmaWxsUHJvZmlsZUluZm9Gb3JtKCk7XG59XG5cbi8vINCe0YLQutGA0YvQstCw0LXQvCDQv9C+0L/QsNC/INGB0L7Qt9C00LDQvdC40Y8g0LrQsNGA0YLQvtGH0LrQuCwg0YDQtdGB0LXRgtCw0LXQvCDRhNC+0YDQvNGDINC4INC+0YfQuNGJ0LDQtdC8INC30LDQstC40YHRiNC40LUg0L7RiNC40LHQutC4INCy0LDQu9C40LTQsNGG0LjQuFxuY29uc3QgaGFuZGxlQWRkQ2FyZFBvcHVwT3BlbmluZyA9ICgpID0+IHtcbiAgY2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNhcmRBZGRGb3JtLnJlc2V0KCk7XG4gIHBvcHVwQWRkQ2FyZC5vcGVuKCk7XG59XG5cbi8vINCe0YLQutGA0YvQstCw0LXQvCDQv9C+0L/QsNC/INC+0LHQvdC+0LLQu9C10L3QuNGPINCw0LLQsNGC0LDRgNCwLCDRgNC10YHQtdGC0LDQtdC8INGE0L7RgNC80YMg0Lgg0L7Rh9C40YnQsNC10Lwg0LfQsNCy0LjRgdGI0LjQtSDQvtGI0LjQsdC60Lgg0LLQsNC70LjQtNCw0YbQuNC4XG5jb25zdCBoYW5kbGVVcGRhdGVBdmF0YXJQb3B1cE9wZW5pbmcgPSAoKSA9PiB7XG4gIHVwZGF0ZVBvcHVwVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICB1cGRhdGVBdmF0YXJGb3JtLnJlc2V0KCk7XG4gIHBvcHVwVXBkYXRlQXZhdGFyLm9wZW4oKTtcbn1cblxuLy8g0JLQtdGI0LDQtdC8INC70LjRgdC10L3QtdGAINC90LAg0L7RgtC60YDRi9Cy0LDQvdC40LUg0L/QvtC/0LDQv9CwINC/0YDQvtGE0LjQu9GPXG5idXR0b25FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVByb2ZpbGVQb3B1cE9wZW5pbmcpO1xuXG4vLyDQntGC0LrRgNGL0LLQsNC10Lwg0L/QvtC/0LDQvyDRgdC+0LfQtNCw0L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCDQuCDQvtGH0LjRidCw0LXQvCDQt9Cw0LLQuNGB0YjQuNC1INC+0YjQuNCx0LrQuCDQstCw0LvQuNC00LDRhtC40LhcbmNhcmRBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVBZGRDYXJkUG9wdXBPcGVuaW5nKTtcblxuLy8g0J7RgtC60YDRi9Cy0LDQtdC8INC/0L7Qv9Cw0L8g0L7QsdC90L7QstC70LXQvdC40Y8g0LDQstCw0YLQsNGA0LAg0Lgg0L7Rh9C40YnQsNC10Lwg0LfQsNCy0LjRgdGI0LjQtSDQvtGI0LjQsdC60Lgg0LLQsNC70LjQtNCw0YbQuNC4XG51cGRhdGVBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVVcGRhdGVBdmF0YXJQb3B1cE9wZW5pbmcpO1xuXG4vLyDQl9Cw0L/Rg9GB0LrQsNC10Lwg0LLQsNC70LjQtNCw0YbQuNC4XG5wcm9maWxlUG9wdXBGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbnVwZGF0ZVBvcHVwVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwidGVtcGxhdGUiLCJkYXRhIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlRGVsZXRlSWNvbkNsaWNrIiwidGhpcyIsIl9jYXJkTmFtZSIsIm5hbWUiLCJfY2FyZExpbmsiLCJsaW5rIiwiX2NhcmRMaWtlcyIsImxpa2VzIiwiX2lkIiwiX3VzZXJJZCIsIl9vd25lcklkIiwib3duZXIiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVJY29uQ2xpY2siLCJfdGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZmluZCIsInVzZXIiLCJ1cGRhdGVkTGlrZXMiLCJfY2FyZCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiaXNMaWtlZCIsIl9saWtlVG9nZ2xlT25IYW5kbGVyIiwiX2xpa2VUb2dnbGVPZmZIYW5kbGVyIiwiX2NhcmRJbWFnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2FyZExpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzZXRMaWtlcyIsInNldEF0dHJpYnV0ZSIsInN0eWxlIiwiZGlzcGxheSIsIkZvcm1WYWxpZGF0b3IiLCJjb25mIiwiZm9ybVNlbGVjdG9yIiwiX2NvbmYiLCJfZm9ybVNlbGVjdG9yIiwiX2N1cnJlbnRGb3JtIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsIl90b2dnbGVCdXR0b25TdGF0ZSIsImZvckVhY2giLCJpbnB1dEVsZW1lbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJfaXNWYWxpZCIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsImlkIiwiaW5wdXRFcnJvckNsYXNzIiwiX2hhc0ludmFsaWRJbnB1dCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsInJlbW92ZUF0dHJpYnV0ZSIsInNvbWUiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbXMiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZU92ZXJsYXlDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZSIsImV2dCIsImtleSIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWlzc2lvbiIsIl9oYW5kbGVGb3JtU3VibWlzc2lvbiIsIl9mb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJpc0xvYWRpbmciLCJQb3B1cFdpdGhJbWFnZSIsIl9jYXJkSW1hZ2VWaWV3IiwiX2NhcmROYW1lVmlldyIsInNyYyIsImFsdCIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsIl9oYW5kbGVDb25maXJtYXRpb24iLCJoYW5kbGVyIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZSIsIl9hYm91dCIsIl9hdmF0YXIiLCJfdXNlckRhdGEiLCJhYm91dCIsInVzZXJEYXRhIiwiYmFja2dyb3VuZEltYWdlIiwiYXZhdGFyIiwiQXBpIiwib3B0aW9ucyIsIl9iYXNlVXJsIiwiYmFzZVVybCIsIl9oZWFkZXJzIiwiaGVhZGVycyIsIlByb21pc2UiLCJhbGwiLCJnZXRJbml0aWFsQ2FyZHMiLCJnZXRVc2VySW5mbyIsImZldGNoIiwidGhlbiIsImNhcmRMaXN0Iiwib2siLCJqc29uIiwicmVqZWN0Iiwic3RhdHVzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwicmVzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJidXR0b25FZGl0UHJvZmlsZSIsInByb2ZpbGVQb3B1cE5hbWUiLCJwcm9maWxlUG9wdXBKb2IiLCJjYXJkQWRkQnV0dG9uIiwiY2FyZEFkZEZvcm0iLCJjYXJkQWRkTmFtZSIsImNhcmRBZGRMaW5rIiwidXBkYXRlQXZhdGFyRm9ybSIsInVwZGF0ZUF2YXRhckJ1dHRvbiIsImFwaSIsImF1dGhvcml6YXRpb24iLCJjYXJkc1NlY3Rpb24iLCJjYXJkRGF0YSIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwiY2FyZCIsInBvcHVwWm9vbUNhcmQiLCJvcGVuIiwidW5saWtlQ2FyZCIsInVwZGF0ZWRDYXJkIiwibGlrZUNhcmQiLCJwb3B1cERlbGV0ZUNhcmQiLCJzZXRIYW5kbGVDb25maXJtYXRpb24iLCJyZW1vdmVNeUNhcmQiLCJkZWxldGVNeUNhcmQiLCJnZW5lcmF0ZUNhcmQiLCJnZXRJbml0aWFsSW5mbyIsImluaXRpYWxEYXRhIiwiaW5pdGlhbENhcmRMaXN0IiwicmV2ZXJzZSIsImluaXRpYWxVc2VySW5mbyIsInJlbmRlckZpbmFsIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsInByb2ZpbGVQb3B1cEZvcm1WYWxpZGF0b3IiLCJjYXJkRm9ybVZhbGlkYXRvciIsInVwZGF0ZVBvcHVwVmFsaWRhdG9yIiwicG9wdXBQcm9maWxlIiwicmVuZGVyTG9hZGluZ1RleHQiLCJlZGl0VXNlckluZm8iLCJ1cGRhdGVkVXNlckluZm8iLCJwb3B1cEFkZENhcmQiLCJoYW5kbGVBZGRDYXJkUG9wdXBTdWJtaXQiLCJwb3B1cFVwZGF0ZUF2YXRhciIsImVkaXRBdmF0YXIiLCJ1cGRhdGVkVXNlckRhdGEiLCJmaW5hbGx5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGROZXdDYXJkIiwibmV3Q2FyZERhdGEiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==